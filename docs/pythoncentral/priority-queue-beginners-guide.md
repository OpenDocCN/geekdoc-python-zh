# 优先队列:初学者指南

> 原文：<https://www.pythoncentral.io/priority-queue-beginners-guide/>

## **先决条件**

要了解优先级队列，您必须知道:

1.  Python 3
2.  线性队列
3.  Python 数据结构基本概念- [列表，元组](/python-lists-and-tuples/)

## 什么是优先级队列？

在你继续阅读本教程之前，我强烈推荐你阅读之前关于[队列](https://www.pythoncentral.io/use-queue-beginners-guide/)的教程，因为它会给你一个更好的基础，帮助你掌握这里的内容。

如果您想跟踪播放列表中最少播放的歌曲，您会怎么做？最简单的解决方案是对列表进行排序，但这既耗时又浪费。你只需要跟踪点击率最低的歌曲。最小堆或优先级队列可以帮助您做到这一点。

优先级队列，也称为堆队列，是抽象的数据结构。堆是二叉树，其中每个父节点的值小于或等于其任何子节点的值。换句话说，这种类型的队列跟踪最小值。因此，它有助于始终检索最小值。因此，它也被称为最小堆。因此，位置 0 保存最小/最小值。还有一个 max heap，操作也挺像的。

**注意:** 堆队列或优先级队列不对列表进行升序排序。它只是将最小的元素保持在第 0 个位置。其余的元素可以排序，也可以不排序。

#### **如何实现优先级队列**

要使用优先级队列，你必须导入 *heapq* 库。这是按如下方式完成的:

```py
import heapq
```

导入 *heapq* 模块后，可以执行以下堆命令:

1.  heapify() -这个操作使你能够将一个常规的列表转换成一个堆。在执行这个操作时，最小的元素被推到位置 0。

```py
h = [5,2,6,8,0,1,2,4]
heapq.heapify(h)  #returns  [0, 2, 1, 4, 5, 6, 2, 8]
```

**注意:**只有第一个元素在其正确的排序位置。

1.  heapq.heappush(heap，item)——这个操作将一个元素推入一个堆中。 *堆* 是指堆的名称，而 *项* 是指要添加到堆中的项。例如:

```py
heapq.heappush(h,7)
print(h) #[0, 2, 1, 4, 5, 6, 2, 8, 7]
```

尝试添加一个负数，观察会发生什么。

1.  heapq . heap pop(heap)——这个操作用来返回堆中最小的元素。 *堆* 指堆的名称。

```py
heapq.heappop(h) #returns 0
```

1.  heapq.heappushpop(heap，item)——顾名思义，这个命令向堆中添加一个项目，并返回最小的数字。这个命令比一个*heap push()*命令后跟一个*heap pop()*命令要高效得多。

```py
heapq.heappushpop(h,3) #returns 0
print(h) #prints [1, 2, 2, 4, 5, 6, 3, 8, 7]
```

如果你用一个比堆的最小值小的数字尝试上面的命令，你会注意到同样的元素被弹出。比如:

heapq.heappushpop(h，0)#返回 0 print(h) #prints [1，2，2，4，5，6，3，8，7]

1.  heapq.heapreplace(heap，item)——上述问题可以通过执行该操作来解决，因为它返回最小的元素，然后添加新元素 。

```py
heapq.heapreplace(h,0) #returns 1
print(h) #prints [0, 2, 2, 4, 5, 6, 3, 8, 7]
```

上述命令是你在处理堆时使用的主要命令，但也有其他通用命令，如*merge()*和 *nsmallest()。* 这些你可以自己去探索！

## **应用程序**

优先级队列广泛应用于人工智能、统计、操作系统和图形等不同领域。

## **结论**

尝试解决简介中讨论的音乐播放器问题。您将需要*堆积*一个元组列表，其中每个元组应该看起来像 *(点击次数，歌曲 id，歌曲名称)* 。 *heapify* 命令将根据元组的第一个元素跟踪 min，这就是为什么元组的第一个元素是*命中数*。把你的答案贴在下面。本教程到此为止。快乐的蟒蛇！