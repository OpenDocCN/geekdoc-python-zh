# å…³äºŽ Python æ­£åˆ™è¡¨è¾¾å¼çš„æ›´å¤šä¿¡æ¯

> åŽŸæ–‡ï¼š<https://www.pythoncentral.io/more-about-python-regular-expressions/>

åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬çœ‹äº†æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•å’Œä¸€äº›ç®€å•çš„ä¾‹å­ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ä¸€äº›æ›´é«˜çº§çš„è¯­æ³•å’Œ Python å¿…é¡»æä¾›çš„ä¸€äº›å…¶ä»–ç‰¹æ€§ã€‚

## æ­£åˆ™è¡¨è¾¾å¼æ•èŽ·ç»„

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¿›è¡Œäº†æœç´¢ï¼Œå¹¶ä½¿ç”¨è¿”å›žçš„`MatchObject`æ¥æå–åŒ¹é…çš„æ•´ä¸ªå­å­—ç¬¦ä¸²ã€‚çŽ°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä»ŽåŒ¹é…çš„å­å­—ç¬¦ä¸²ä¸­æå–éƒ¨åˆ†ã€‚

**è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼:**

```py

\d{2}-\d{2}-\d{4}

```

**å°†åŒ¹é…ä»¥ä¸‹æ ¼å¼çš„æ—¥æœŸ:**

*   ä¸¤ä½æ•°çš„æ—¥æœŸã€‚
*   ä¸€ä¸ªè¿žå­—ç¬¦ã€‚
*   ä¸¤ä½æ•°çš„æœˆä»½ã€‚
*   ä¸€ä¸ªè¿žå­—ç¬¦ã€‚
*   å››ä½æ•°çš„å¹´ä»½ã€‚

**ä¾‹å¦‚:**

```py

>>> s = 'Today is 31-05-2012'

>>> mo = re.search(r'\d{2}-\d{2}-\d{4}', s)

>>> print(mo.group())

31-05-2012

```

**æˆ‘ä»¬å¯ä»¥*é€šè¿‡å°†è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„å„ä¸ªéƒ¨åˆ†æ”¾åœ¨æ‹¬å·ä¸­æ¥æ•èŽ·*:**

```py

(\d{2})-(\d{2})-(\d{4})

```

å¦‚æžœ Python åŒ¹é…è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ†åˆ«æ£€ç´¢æ¯ä¸ª*æ•èŽ·çš„ç»„*ã€‚

```py

>>> mo = re.search(r'(\d{2})-(\d{2})-(\d{4})', s)

>>> # Note: The entire matched string is still available

>>> print(mo.group())

31-05-2012

>>> # The first captured group is the date

>>> print(mo.group(1))

31

>>> # And this is its start/end position in the string

>>> print('%s %s' % (mo.start(1), mo.end(1)))

9 11

>>> # The second captured group is the month

>>> print(mo.group(2))

05

>>> # The third captured group is the year

>>> print(mo.group(3))

2012

```

å½“æ‚¨å¼€å§‹ç¼–å†™æ›´å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°è€Œä¸æ˜¯æ•°å­—æ¥å¼•ç”¨å®ƒä»¬ä¼šå¾ˆæœ‰ç”¨ã€‚è¯­æ³•æ˜¯`(...)`ï¼Œå…¶ä¸­...æ˜¯è¦æ•èŽ·çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œname æ˜¯è¦ä¸ºç»„æŒ‡å®šçš„åç§°ã€‚

```py

>>> s = "Joe's ID: abc123"

>>> # A normal captured group

>>> mo = re.search(r'ID: (.+)', s)

>>> print(mo.group(1))

abc123

>>> # A named captured group

>>> mo = re.search(r'ID: (?P<id>.+)', s)

>>> print(mo.group('id'))

abc123

```

### **ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é‡ç”¨æ•èŽ·çš„ç»„**

æˆ‘ä»¬è¿˜å¯ä»¥èŽ·å–æ•èŽ·çš„ç»„ï¼Œç¨åŽåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­é‡ç”¨å®ƒä»¬ï¼`(?P=name)`è¡¨ç¤º*åŒ¹é…ä¹‹å‰åœ¨å‘½åç»„*ä¸­åŒ¹é…çš„ä»»ä½•å†…å®¹ã€‚**æ¯”å¦‚:**

```py

>>> s = 'abc 123 def 456 def 789'

>>> mo = re.search(r'(?P<foo>def) \d+', s)

>>> print(mo.group())

def 456

>>> print(mo.group('foo'))

def

>>> # Capture 'def' in a group

>>> mo = re.search(r'(?P<foo>def) \d+ (?P=foo)', s)

>>> print(mo.group())

def 456 def

>>> mo.group('foo')

def

```

### **Python æ­£åˆ™è¡¨è¾¾å¼æ–­è¨€**

æœ‰æ—¶æˆ‘ä»¬æƒ³åŒ¹é…çš„ä¸œè¥¿*åªæœ‰*åŽé¢æœ‰å…¶ä»–ä¸œè¥¿ï¼Œè¿™æ„å‘³ç€ Python åœ¨æœç´¢å­—ç¬¦ä¸²æ—¶éœ€è¦æå‰æŸ¥çœ‹ã€‚è¿™è¢«ç§°ä¸º*å‰çž»æ–­è¨€*ï¼Œè¯­æ³•ä¸º`(?=...)`ï¼Œå…¶ä¸­...æ˜¯éœ€è¦è·Ÿéšçš„å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼`ham(?= and eggs)`æ„å‘³ç€*åŒ¹é…â€˜ç«è…¿â€™ï¼Œä½†å‰ææ˜¯å®ƒåŽé¢è·Ÿæœ‰â€˜å’Œé¸¡è›‹â€™*ã€‚

```py

>>> s = 'John likes ham and eggs.'

>>> mo = re.search(r'ham(?= and eggs)', s)

>>> print(mo.group())

ham

```

æ³¨æ„åŒ¹é…çš„å­ä¸²åªæœ‰*ç«è…¿*ï¼Œæ²¡æœ‰*ç«è…¿é¸¡è›‹*ã€‚*å’Œé¸¡è›‹*éƒ¨åˆ†åªæ˜¯å¯¹*ç«è…¿*éƒ¨åˆ†è¿›è¡ŒåŒ¹é…çš„è¦æ±‚ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚æžœä¸æ»¡è¶³è¿™ä¸ªè¦æ±‚ä¼šå‘ç”Ÿä»€ä¹ˆã€‚

```py

>>> s = 'John likes ham and mushrooms.'

>>> mo = re.search(r'ham(?= and eggs)', s)

>>> print(mo)

None

```

```py

>>> s = 'John likes ham, eggs and mushrooms.'

>>> mo = re.search(r'ham(?= and eggs)', s)

>>> print(mo)

None

```

å¯æƒœ Python åªåšç®€å•çš„å­—ç¬¦åŒ¹é…ï¼Œåªä¼šåŒ¹é…å­—ç¬¦ä¸²*ç«è…¿*ï¼Œåªè¦åŽé¢è·Ÿ*å’Œé¸¡è›‹*ã€‚äººå·¥æ™ºèƒ½å’Œè¯­ä¹‰åˆ†æžæ˜¯å¦å¤–ä¸€ç¯‡æ–‡ç« ã€‚ðŸ™‚

æˆ‘ä»¬è¿˜å¯ä»¥åš*å¦å®šå‰çž»æ–­è¨€*ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå…ƒç´ åªæœ‰åœ¨*è€Œä¸æ˜¯*åŽè·Ÿå…¶ä»–ä¸œè¥¿æ—¶æ‰åŒ¹é…ã€‚

```py

>>> s = 'My name is John Doe.'

>>> # Syntax is (?!...)

>>> mo = re.search( r'John(?! Doe)', s)

>>> print(mo)

None

```

```py

>>> s = 'My name is John Jones.'

>>> mo = re.search(r'John(?! Doe)', s)

>>> print(mo.group())

John

```