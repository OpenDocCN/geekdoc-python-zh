# 在 Python 中使用 API 的专家提示

> 原文：<https://www.pythoncentral.io/expert-tips-for-using-apis-in-python/>

Python 是一种通用的编程语言，你可以在 web 应用程序的后端、前端或整个堆栈上使用。在本文中，我们将回顾一些在 Python 中使用 API 的专家提示。首先，理解什么是 API 以及它是如何工作的很重要。API 或应用程序编程接口规则控制一个软件如何与另一个软件交互。当您使用 API 时，您向服务器请求可以在应用程序中使用的数据。例如，当您使用 Google Maps API 获取路线时，您正在向 Google Maps 服务器发送一个请求，以获取您需要的信息。然后，服务器用请求的数据进行响应。

[![laptop](img/76a53c7259f13036d41f0f816d5e81bc.png)](https://www.pythoncentral.io/wp-content/uploads/2022/06/laptop-g8cbf04226_1920.jpg)

## 进行 API 调用

API(应用编程接口)是一组允许软件程序相互通信的定义规则。当需要从远程数据源(如基于 web 的数据库)访问数据时，会使用 API。软件程序将向 API 发送访问数据的请求，返回所需的信息。

Python 使得使用 API 变得相对容易，并且可以使用几个不同的库来进行 API 调用。对于简单的 API 操作，可以考虑将 API 文件上传到云中。https://upload.io/cloudinary-alternative[](https://upload.io/cloudinary-alternative)背后的团队建议上传你的 API 文件应该简单安全。在 Python 中进行 API 调用时，首先需要导入相关的库，并指定希望访问的 API 端点的 URL。根据您使用的 API，您可能还需要提供身份验证凭证。一旦进行了 API 调用，返回的数据将是 JSON 格式的，然后可以根据需要对其进行解析和处理。

在 Python 中进行 API 调用是一个相对简单的过程，但是你需要记住一些事情以确保一切顺利进行。首先，确保你已经安装了最新版本的 Python 解释器。其次，花一些时间熟悉您正在使用的 API，因为这将使您更容易理解返回的数据。最后，在部署代码之前一定要测试它，因为这将有助于避免任何潜在的问题。

## 使用 API 认证

在 Python 中使用 API 时，确保正确地验证请求是很重要的。毕竟，如果您没有正确的身份验证，您将无法访问您试图获取的数据。幸运的是，Python 中有几种不同的 API 认证方式。

使用 API 进行认证的一种常见方式是使用 HTTP 基本认证。使用这种方法，您可以在每次请求时提供您的用户名和密码。虽然这相对容易设置，但不是最安全的选择。如果您担心安全性，您可能会考虑使用 OAuth 令牌。

使用 OAuth，首先需要在服务器端生成一个令牌。一旦有了令牌，就可以在每个请求中包含它。它增加了一层额外的[安全](https://www.pythoncentral.io/pyside-pyqt-tutorial-qwebview/)，因为如果需要的话，令牌可以很容易地被撤销。如果您想获得更高的安全性，还可以在 API 调用中使用双因素身份验证。除了用户名和密码之外，您还需要输入一个发送到您手机或电子邮件的代码。

无论您选择哪种身份验证方法，确保您安全地处理您的凭据都很重要。这意味着将它们存储在一个安全的地方，不与任何不需要访问的人共享。

## 错误处理

使用 API 的一个常见任务是处理错误。毕竟，即使是设计最好的 API 有时也会返回意想不到的结果。幸运的是，Python 的异常处理能力可以使处理错误变得更加容易。以下是在 Python 中使用 API 时使用异常的一些准则。

首先，清楚地理解什么是异常是很重要的。在 Python 中，异常是程序执行过程中出现的错误。当出现异常时，程序将停止运行，并显示一条错误消息。异常处理就是处理这些错误，使程序能够继续顺利运行。

Python 中有两种处理异常的方法:try/except 块和 Try/Except/Finally 块。Try/except 块用于捕获可能发生的特定错误，而 Try/Except/Finally 块用于捕获所有错误。确保根据您的需要使用合适的块。

使用异常处理有助于使你的代码更加健壮。但是，一定要明智地使用它，因为过多的异常处理会使您的代码更难阅读和理解。

## 了解 API 比率限值

[![api rate limit](img/022e082b921e31033e59106de91fd891.png)](https://www.pythoncentral.io/wp-content/uploads/2022/06/programming-2115930__340.jpg)

我们通常使用 API 的宝贵资源之一来调用 API。这就是为什么大多数原料药都有比率限制，以防止过度使用和滥用。如果你是第一次使用 API的 [，了解这些速率限制是如何工作的以避免超过它们是很重要的。大多数 API 会限制在某个时间段内的请求数量。例如，GitHub API 的速率限制是每小时 60 个请求。如果您试图在一个小时内发出超过 60 个请求，您将会收到一条错误消息。一些 API 还使用“突发”，这允许您发出一定数量的超出限制的请求，只要它们随时间间隔开。例如，Twitter API 将允许您在 15 分钟内发出 100 个请求。因此，如果您在此期间尝试发出超过 100 个请求，您将会收到一条错误消息。理解这些速率限制是如何工作的对于有效地使用 API 是至关重要的。](https://www.forbes.com/sites/forbestechcouncil/2019/01/22/three-tips-for-learning-a-new-programming-language-fast/?sh=5e8eeaf46cc1)

要使用 API 进行认证，您需要知道它的基本 URL、用户名和密码。通过身份验证后，您可以使用适当的端点进行 API 调用，并传入必要的参数。如果您的请求导致错误，Python 将引发一个异常。一定要适当地处理这些异常，这样你的程序才不会崩溃。最后，注意 API 比率限制，确保不要超过它们。