# 本周 PyDev:Irit kat riel

> 原文：<https://www.blog.pythonlibrary.org/2022/11/21/pydev-of-the-week-irit-katriel/>

本周我们欢迎艾瑞特·卡特瑞尔([@艾瑞特·卡特瑞尔](https://mobile.twitter.com/iritkatriel) )成为我们的本周 PyDev！Irit 是在微软工作的 CPython 核心开发人员。Irit 帮助编写了 [PEP 654](https://peps.python.org/pep-0654/) ，它是关于“异常组和 except*”的，今年在 Python 3.11 中发布。这个新特性使得同时引发和处理多个不相关的异常成为可能。

让我们花些时间更好地了解 Irit！

## 你能给我们介绍一下你自己吗？

我学的是计算机科学，1995 年毕业后，我在以色列海法的开发中心为英特尔工作。我当时正在为 Merced 处理器开发一个性能模拟器，在真正的芯片出现之前，微软编译器团队就已经在使用它了。然后回学校读了图算法的博士(纸笔证明，不编程)。那时我最喜欢的论文是关于一种算法，当你插入边时，它能有效地保持 DAG 节点的拓扑顺序。改进这样一个基本问题很有趣。

博士后，我结束了在伦敦曲折的生活。当时伦敦的技术领域非常集中在金融领域，在接下来的 15 年左右的时间里，我主要从事银行技术工作。这是在金融危机之后，许多事情都在发生变化，因此需要新的技术系统和对现有系统的改变。我最初从事的工作与业务关系密切，从事自动计算各种货币批发价格的系统工作。它给了我有用的经验，尤其是看到了一个 bug 可能有多贵，但我并不喜欢这份工作，不想以此为职业。我逐渐转向更基础的技术领域，为其他程序员提供服务，而不是直接支持业务线。

## 为什么开始用 Python ？

2016 年，我在美国银行(Bank of America)找到了一个角色，为我整合了一切——我在维护一个基于 python 的内部语言，该语言定义了一个大规模可扩展的电子表格。换句话说，这是一个图表，它跟踪计算之间的依赖关系，以支持输入变化时的有效更新。它是 2010 年建立的系统的核心部分，以符合后金融危机时代的监管风险管理要求。在这个职位上，我能够利用我的图形算法知识，同时深入研究语言设计问题。我以前作为面向业务的程序员的经历帮助我理解了我的用户的工作条件，并对他们能够接受的变化有了一个现实的期望。这也是我第一次在 Python 中做任何重要的事情。

在某个时候，我的经理鼓励我参与 cpython 开发本身，我发现这非常令人满意。在银行，我有大约 4000 名直接用户，但是我在 cpython 上所做的工作影响了数百万程序员。知道这一点是一种难以置信的感觉。最终，我成为了一名 cpython 核心开发人员，后来加入了微软的 faster-cpython 团队，全职开发 cpython 并专注于性能。

## 你还知道哪些编程语言，你最喜欢哪一种？

除了 Python，我主要使用 C、C++和 Java。有一段时间(直到大约十年前)，我一直关注 C++和 boost 库的开发，我喜欢语言规范的严谨性，以及将东西放入 boost 库和后来的 C++ stdlib 的过程，同时保留了库的整体一致性。与此同时，C++在新项目中的使用越来越少(除了对性能敏感的项目)，因为程序员在其他语言中更有效率。

我不认为我有最喜欢的语言。在大多数情况下，使用哪种语言不是由我决定的，语言也不是我决定接受工作机会的主要因素。目前我只写了 Python 和 C，我想这将会是一段时间，因为我正在做的事情。如果我有理由使用另一种语言，我会的。

## 你现在在做什么项目？

目前，我正在对 cpython 编译器进行一系列的增量更改，这将改进它的内部结构，使它更容易发展。将 python 代码翻译成字节码包括许多步骤:标记代码，将标记转换成抽象语法树(AST)，最后编译器将 AST 翻译成字节码。我们目前可以通过标准库的*令牌化*和 *ast* 模块来访问前两步，但是第三步，将 ast 编译成字节码，是一个很大的 C 代码黑盒，并且相当复杂。它包括遍历 AST 并发出指令序列的代码生成步骤，然后是应用大量技巧使代码更快的优化阶段，包括控制流图的分析。最后，汇编程序解析跳转偏移量，发出最终的字节码，并为代码对象构造附加信息，如异常表和源位置表。

经过三十年的发展，编译器的代码有点难以使用，原因有二。首先，这些不同阶段的代码是非常耦合的，有时很难预测一个变化可能产生的影响。第二，并不总是有可能为我们想要做出的改变编写单元测试，因为每个测试都要运行大量的代码。我的目标是将编译器分成三个或四个不同的阶段，每个阶段都可以独立于用 Python 编写的单元测试。一旦我们做到了这一点，编译器的代码将会被更好地构建并且更容易维护。它将更容易被需要使用它的开发人员所理解，并且它将给我们信心去实现各种各样的优化。

## 你还有什么想说的吗？

我在职业生涯的后期参与了开源开发。我带来的技术经验当然非常有用，但是关于开源是如何工作的，还有很多东西需要学习。工作中固有的透明性非常令人耳目一新，我已经提到了在高影响力项目中工作的兴奋感。我希望这将鼓励其他职业生涯较晚的开发人员为开源项目，尤其是 cpython 做出贡献。从阅读[开发指南](https://devguide.python.org)开始。

Irit，谢谢你接受采访！