# 本周 PyDev:Hillel Wayne

> 原文：<https://www.blog.pythonlibrary.org/2018/09/24/pydev-of-the-week-hillel-wayne/>

本周我们欢迎 Hillel Wayne([@ Hillelogram](https://twitter.com/hillelogram))成为我们本周的 PyDev！Hillel 是“学习 TLA+”的作者，目前正在撰写“[实用 TLA+](https://amzn.to/2uIbWMb) ”一文。你应该看看他的[网站/博客](https://www.hillelwayne.com/post/)，因为这是一个了解他更多的好地方。Hillel 最近也在 PyCon US 上发表了关于测试的演讲。让我们花点时间和 Hillel 聊聊吧！

你能告诉我们一些关于你自己的情况吗(爱好、教育等)

我一直计划成为一名物理学家，直到大学四年级，我突然想成为一名程序员。我在湾区做了一段时间的 fullstack，在芝加哥做了一段时间的后端开发，在那里我发现了对正式方法的深深热爱，或者说是“数学地”设计和构建软件的实践。如果你读过[即将到来的软件启示录](https://www.theatlantic.com/technology/archive/2017/09/saving-the-world-from-code/540393/#Key%20Tasks)，这是一个很好的为什么和什么的介绍。我现在做[咨询和工作坊](https://www.hillelwayne.com/consulting/)，帮助人们如何；这些工具太强大、太有用了，不能停留在利基市场。

除了正规方法，我对技术的兴趣如下:

*   软件安全:错误实际上是从哪里来的，我们如何降低它们的可能性？
*   经验软件工程:在软件工程中我们实际上知道什么是真的，我们只是认为什么是真的？
*   软件历史:我们是如何走到今天的，我们能从过去学到什么？
*   怪异有趣的小众思想、语言、技巧等。

除了技术，我还做很多杂耍和烹饪。我是一个超级狂热的糖果和巧克力爱好者。芝加哥有个地方卖 10 磅重的巧克力，售价 50 美元，我通常一年要吃掉 4 块。

**你为什么开始使用 Python？**

大约在 2012 年左右，我突然意识到我不想读物理研究生，必须在现实世界中找到一些赚钱的方法。因为我真正喜欢的物理研究部分是硬件编程，所以我决定寻找编程工作。但是实验室技术主要是 Matlab 和 C 语言，所以我选择了 Python 来分散我的技能，并立即被吸引住了。不用担心内存或字符串问题真是太好了！它很快成为我的主要编程语言，尤其是用于学习新的编程技术。例如，我通过用 Python 实现[忒修斯和牛头怪](https://en.wikipedia.org/wiki/Theseus_and_the_Minotaur)来学习 TDD，有一段时间我用 Django 应用程序帮助[管理我的抑郁症](https://github.com/hwayne/safehouse)。

总的来说，这些天我做的编程少了很多，但是每当我需要测试一个新想法，或者用一段代码交流一个想法时，我仍然会使用 Python。即使是不了解 python 的人通常也能掌握 python 代码片段中发生的事情。

你还知道哪些编程语言，你最喜欢哪一种？

我的前几份工作是作为一名 Rails 开发人员，所以我知道这个工具，但不太了解 Ruby 语言。除此之外，我倾向于选择新的编程语言，因为它们让我很困惑。我现在正在上一堂我很喜欢的序言课，所以我应该感谢安妮·奥格伯恩。我也在 J 语言中做了很多，有趣的是，AutoHotKey 是我日常生活中最有用的工具(除了 Python)。

然而，我的专长是规范语言，我们用来描述我们整个系统的符号，而不是实现它们。我已经在 Alloy 和 TLA+上做了很多工作，并且正在写一本关于后者的书。TLA+是我最擅长的，也是我工作最开心的，尽管每当我打破常规时，它都让我觉得自己像个白痴。

你现在在做什么项目？

我目前正在写一本关于 TLA+的书，并且正在为公司准备一个为期 3 天的研讨会。在那之后，一个想法一直在我脑海中跳动，那就是做一个名为“科学编码者的 Python”的短片。这将是一些旨在教我的研究生院的朋友谁使用 Python 如何更好地使用它。像“这就是 IDE，这就是它如何使编码更容易”，“复制/粘贴意味着错误，尝试使用函数来代替”，“这就是如何检查你得到了正确的结果，没有打错字”，等等。我认为有很多机会让我们的科学代码更好，进而让我们的科学研究更安全。

哪些 Python 库是你最喜欢的(核心或第三方)？

第三方必须是[假设](https://github.com/HypothesisWorks/hypothesis/tree/master/hypothesis-python)，这是 python 的“基于属性的测试”库。不是将测试定义为“检查这个输入给我们这个输出”，而是说“输出应该具有这些属性，现在生成 100 个输入并检查它们。”这需要更多地考虑你的代码的属性，但是它可以捕捉真正令人毛骨悚然的错误。实际上，我最近在[做了一个关于它的演讲](https://www.hillelwayne.com/talks/beyond-unit-tests/)，讲的是如何用它来为你生成集成测试。

核心库是 [abc](https://docs.python.org/3/library/abc.html) 。特别是，我有点痴迷于 __subclasshook__。在大多数语言中，事物都声明自己的类型:如果 Foo 继承自 Bar，那么 Foo 就是 Bar。但是有了 ABCs，你可以把它翻转过来，让抽象类型声明其他类算什么类型。例如，你可以让一个 ABC 说“每个名字是回文的类都算作一个 TimeFarbler。”我不知道这在实践中如何有用，但这个想法让我很高兴。

我知道你是一本关于 TLA+的书的作者。你能告诉我们 TLA+是什么吗？

软件中有(非常粗略的)两种错误:实现错误和设计错误。实现错误是指在将设计转换成代码时犯了一个错误，比如编写 return l.sort()而不是 return sorted(l)。设计错误是指你的代码忠实地遵循了你的设计，但设计实际上并不像你想象的那样。一个常见的例子是遗漏了一个边缘情况:如果有人点击“提交订单”按钮两次呢？如果购物车中的商品缺货，会发生什么情况？如果我既有“5 美元折扣”又有“10%折扣”的优惠券，我应该得到多少折扣？

设计错误通常比实现错误更危险、更微妙。它们也很难检查，而且几乎所有我们当前的工具只能帮助我们处理实现错误。为了测试我们的设计，我们使用了 TLA+这样的规范语言。我们描述我们的系统和它应该具有的属性，然后我们使用模型检查器来探索该系统的所有可能的发展，并确认它确实如我们所期望的那样。例如，如果我正在创建一个消息处理器，我可能会写这样的代码

\ m \in 消息:m \ in 已发送~> m \in 已接收

说发送的每条消息最终都会被接收到(对于“消息”、“发送”和“接收”的定义)。然后，我可以检查该属性是否确实适用于我的现有系统。

TLA+在工业领域有着良好的记录。亚马逊用它来修复 S3 的问题，微软用它来帮助 T2 发现 Xbox 的漏洞。在一个不太“国际大公司”的层面上，我用它来[修正业务逻辑](https://www.youtube.com/watch?v=_9B__0S21y8)，穆拉特·德米尔巴斯用它来[教授学生分布式系统](http://muratbuffalo.blogspot.com/2014/08/using-tla-for-teaching-distributed.html)。

你从写书中学到了什么？如果可以重来，你会做些什么？

奇怪的是，对我来说最难的不是实际内容，而是一致性。如果我重命名一个章节，我记得更新它的所有引用吗？我确定我在概念 B 之前介绍了概念 A 吗？诸如此类的东西。我开始用 Word 写作，中途用 pandoc 切换到 markdown，两者都没有真正帮助解决这个问题。我想如果我重新开始，我会花一些时间研究什么样的格式能最好地实现这种一致性。可能是 RST 或乳胶。

(有趣的事实:莱斯利·兰波特创造了 TLA+和乳胶！)

大约进行到一半的时候，我开始为诸如错误检查、转换文档和上传之类的事情构建自动化工具链。这是一个巨大的时间节省。对于下一本书，我会花更多的时间从一开始就构建一个更强大的工具链。

最后的发现:与技术编辑配对。这本书很厚，所以校对起来很慢。当我们开始安排时间坐下来一起检查时，我们开始行动得更快了(我得到了更深入的反馈)。

感谢您接受采访！