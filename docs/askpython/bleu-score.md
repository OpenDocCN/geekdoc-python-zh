# Python ä¸­çš„ BLEU scoreâ€“åˆå­¦è€…æ¦‚è¿°

> åŸæ–‡ï¼š<https://www.askpython.com/python/bleu-score>

è¯»è€…æœ‹å‹ä»¬ï¼Œä½ ä»¬å¥½ï¼åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å…³æ³¨ Python ä¸­ BLEU score çš„**å®ç°ã€‚**

æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼ğŸ™‚

***ä¹Ÿè¯»ä½œ:[åœ¨ Python ä¸­è‡ªå®šä¹‰æ•°æ®é›†](https://www.askpython.com/python-modules/pytorch-custom-datasets)***

* * *

## ä»€ä¹ˆæ˜¯ BLEU è¯„åˆ†ï¼Ÿ

åœ¨æœºå™¨å­¦ä¹ å»ºæ¨¡ã€æ·±åº¦å­¦ä¹ å’Œè‡ªç„¶è¯­è¨€å¤„ç†çš„é¢†åŸŸä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹å®šçš„é”™è¯¯åº¦é‡ï¼Œä»¥ä½¿æˆ‘ä»¬èƒ½å¤Ÿè¯„ä¼°å­—ç¬¦ä¸²è¾“å…¥ä¸Šæ„å»ºçš„æ¨¡å‹ã€‚

BLEU è¯„åˆ†å°±æ˜¯è¿™æ ·ä¸€ç§åº¦é‡ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä¼°è®¡æœºå™¨ç¿»è¯‘æ¨¡å‹æˆ–ç³»ç»Ÿçš„æ•ˆç‡ã€‚ä»Šå¤©ï¼Œè¿™å·²ç»è¢«è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹å’Œåº”ç”¨ç¨‹åºå¹¿æ³›ä½¿ç”¨ã€‚

åœ¨å¹•åï¼ŒBLEU æœ¯è¯­è¯„åˆ†å°†å€™é€‰å¥å­ä¸å‚è€ƒå¥å­è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åè¯„ä¼°å€™é€‰å¥å­ä¸å‚è€ƒå¥å­çš„èåˆç¨‹åº¦ã€‚è¿™æ ·ï¼Œå®ƒåˆ†åˆ«åœ¨ 0-1 çš„èŒƒå›´å†…å¯¹åˆ†æ•°è¿›è¡Œè¯„çº§ã€‚

* * *

## Python ä¸­ BLEU åˆ†æ•°çš„è®¡ç®—

ä¸ºäº†å®ç° BLEU åˆ†æ•°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç”± sentence_bleu()å‡½æ•°ç»„æˆçš„ [NLTK æ¨¡å—](https://www.askpython.com/python-modules/tokenization-in-python-using-nltk)ã€‚å®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä¼ é€’å‚è€ƒå¥å­å’Œå€™é€‰å¥å­ã€‚ç„¶åï¼Œå®ƒå¯¹ç…§å‚è€ƒå¥å­æ£€æŸ¥å€™é€‰å¥å­ã€‚

å¦‚æœæ‰¾åˆ°å®Œå…¨åŒ¹é…ï¼Œå®ƒè¿”å› 1 ä½œä¸º BLEU åˆ†æ•°ã€‚å¦‚æœå®Œå…¨ä¸åŒ¹é…ï¼Œåˆ™è¿”å› 0ã€‚å¯¹äºéƒ¨åˆ†åŒ¹é…ï¼Œè“è‰²åˆ†æ•°å°†åœ¨ 0 å’Œ 1 ä¹‹é—´ã€‚

## **å®ç° BLEU è¯„åˆ†**

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ

1.  æˆ‘ä»¬å·²ç»å¯¼å…¥äº† NLTK åº“å’Œ sentence_bleu å­æ¨¡å—ã€‚
2.  æ­¤å¤–ï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå¼•ç”¨è¯­å¥åˆ—è¡¨ï¼Œå¹¶é€šè¿‡å¯¹è±¡ **ref** æŒ‡å‘å®ƒä»¬ã€‚
3.  ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª**æµ‹è¯•**å¥å­ï¼Œå¹¶ä½¿ç”¨ sentence_bleu()æ¥æµ‹è¯•å®ƒä¸ **ref** çš„å¯¹æ¯”ã€‚
4.  å› æ­¤ï¼Œå®ƒç»™å‡ºäº†ä¸€ä¸ªå¤§çº¦ä¸º 1 çš„è¾“å‡ºã€‚
5.  ä¸‹ä¸€æ¬¡ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **test01** è¯­å¥å¹¶å°†å…¶ä¼ é€’ç»™å‡½æ•°ã€‚
6.  ç”±äºè¯­å¥ç”±**å’Œ**ç»„æˆï¼Œåè€…æ˜¯å¼•ç”¨è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å®Œå…¨åŒ¹é…å¼•ç”¨è¯­å¥ï¼Œå› æ­¤å®ƒè¿”å›ä¸€ä¸ªæ¥è¿‘ 0 çš„è¿‘ä¼¼å€¼ã€‚

```py
from nltk.translate.bleu_score import sentence_bleu
ref = [
    'this is moonlight'.split(),
    'Look, this is moonlight'.split(),
    'moonlight it is'.split()
]
test = 'it is moonlight'.split()
print('BLEU score for test-> {}'.format(sentence_bleu(ref, test)))

test01 = 'it is cat and moonlight'.split()
print('BLEU score for test01-> {}'.format(sentence_bleu(ref, test01)))

```

**è¾“å‡ºâ€”**

```py
BLEU score for test-> 1.491668146240062e-154
BLEU score for test01-> 9.283142785759642e-155

```

* * *

## ç”¨ Python å®ç° N-gram score

å¦‚ä¸Šæ‰€è¿°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œsentence_bleu()å‡½æ•°åœ¨å¼•ç”¨è¯­å¥ä¸­æœç´¢ 1 ä¸ªå•è¯è¿›è¡ŒåŒ¹é…ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®å¼•ç”¨è¯­å¥åœ¨é˜Ÿåˆ—ä¸­æœç´¢å¤šä¸ªå•è¯ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ N-gramã€‚

*   **1 å…‹:1 ä¸ªå­—**
*   **2-gram:æˆå¯¹çš„å•è¯**
*   **ä¸‰ä¸ªå­—æ¯:ä¸‰ä¸ªä¸€ç»„**ç­‰ç­‰

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»¥ä¸‹å‚æ•°ä¼ é€’ç»™ sentence_bleu()å‡½æ•°æ¥å®ç° N-gram:

```py
1-gram: (1, 0, 0, 0)
2-gram: (0, 1, 0, 0) 
3-gram: (1, 0, 1, 0)
4-gram: (0, 0, 0, 1)

```

**ä¸¾ä¾‹**:

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢æåˆ°çš„å¼•ç”¨è¯­å¥ **ref** ä½¿ç”¨ sentence_bleu()å‡½æ•°è®¡ç®—äº†å€™é€‰å¥å­ **test01** çš„ 2-gram BLEU å¾—åˆ†ï¼Œä¼ é€’äº† 2-gram å¾—åˆ†çš„æƒé‡ï¼Œå³(0ï¼Œ1ï¼Œ0ï¼Œ0)ã€‚

```py
from nltk.translate.bleu_score import sentence_bleu
ref = [
    'this is moonlight'.split(),
    'Look, this is moonlight'.split(),
    'moonlight it is'.split()
]
test01 = 'it is cat and moonlight'.split()
print('2-gram:' sentence_bleu(ref, test01, weights=(0, 1, 0, 0)))

```

**è¾“å‡º**:

```py
2-gram: 0.25

```

* * *

## ç»“è®º

åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±ç»“æŸäº†è¿™ä¸ªè¯é¢˜ã€‚å¦‚æœä½ é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºã€‚

æ›´å¤šä¸ Python ç¼–ç¨‹ç›¸å…³çš„å¸–å­ï¼Œè¯·ç»§ç»­å…³æ³¨æˆ‘ä»¬ã€‚

åœ¨é‚£ä¹‹å‰ï¼Œå­¦ä¹ æ„‰å¿«ï¼ï¼ğŸ™‚