# 关于本书

> 原文：[`www.thedigitalcatbooks.com/pycabook-about-the-book/`](https://www.thedigitalcatbooks.com/pycabook-about-the-book/)
> 
> 我们将重新组合乐队，进行几场演出，我们就能赚点钱。砰！五千美元。
> 
> 《布鲁斯兄弟》，1980 年

2015 年，我的同事 Roberto Ciatti 向我介绍了清洁架构。我开始严格遵循测试驱动开发（TDD）的方法与他一起工作，并学习或更好地理解了许多我现在认为是我编程知识支柱的东西。

不幸的是，项目被取消了，但清洁架构的概念一直留在了我的心中，所以我重新审视了当时开始的一个简单开源项目。同时，我阅读了 Ivar Jacobson 的《面向对象软件工程：一种用例驱动的方法》。

2013 年，我开始写个人博客《数字猫》（[The Digital Cat](https://www.thedigitalcatonline.com/)），在发表了大量与 Python 相关的帖子后，我开始撰写一篇展示清洁架构之美给其他程序员看的帖子：“Python 中的清洁架构：一步一步的示例”，于 2016 年发布，受到了 Python 社区的欢迎。在接下来的几年里，我考虑扩展这篇帖子，但我找不到时间去做，同时我意识到我写的一些东西需要纠正、澄清或简单地更新。所以我认为一本书可能是有效地展示整个图景的最佳方式，就这样我们有了这本书。

2020 年，在推迟了很久之后，我决定审查整本书，更新并澄清了一些写得不太好的部分。我还决定删除关于 TDD 的部分。虽然我相信每个程序员都应该理解 TDD，但本书的主题是不同的，所以我更新了材料，并在我的博客上发布了它。

这本书是我投入许多时间思考、实验、学习和犯错误的结果。没有许多人的帮助，我无法完成它，其中一些人的名字我不知道，他们提供了免费的文档、免费的软件和免费的帮助。谢谢大家！我还想特别感谢许多给我提出建议、纠正或只是发送感谢信息的读者。谢谢所有人！

## 本书的前提和结构

要完全欣赏这本书，你需要了解 Python，并熟悉 TDD，特别是单元测试和模拟。如果您需要刷新这些主题的知识，请参考我博客上发布的系列文章[TDD in Python with pytest](https://www.thedigitalcatonline.com/blog/2020/09/10/tdd-in-python-with-pytest-part-1/)。

在阅读完两个引言部分之后，第一章对采用整洁架构设计的系统进行了**10,000 英尺的概述**，而第二章简要讨论了该软件架构的**组件**及其背后的理念。第三章探讨了整洁架构的**具体示例**，第四章在此基础上扩展了示例，并添加了**Web 应用程序**。第五章讨论了**错误管理**以及之前章节中开发的 Python 代码的改进。第六章和第七章展示了如何将**不同的数据库系统**连接到之前创建的 Web 服务，而第八章总结了示例，展示了如何使用**生产就绪配置**运行应用程序。

## 排版约定

本书使用 Python，因此大多数代码示例都将使用这种语言，无论是`内联`还是像这样特定的代码块

`some/path/file_name.py`

```py
def example():
    print("This is a code block") 
```

注意，包含代码的文件的路径在源代码之前打印出来。代码块不包含行号，因为通常讨论的代码部分会在文本中重复。这也使得可以直接从 PDF 中复制代码。

以通用提示符`$`呈现 Shell 命令

```py
$ command --option1 value1 --option2 value 2 
```

这意味着您将从`command`开始复制并执行字符串。

我还会使用两个不同的边栏来链接代码仓库并标记重要的原则。

此框提供了一个链接到包含所展示代码的提交或标签。

*源代码

[`github.com/pycabook/rentomatic/tree/master`](https://github.com/pycabook/rentomatic/tree/master)*

*此框突出显示当前章节中详细解释的概念*

**概念**

这总结了文本中解释的重要概念。**

## **为什么这本书是免费的**

**我开始写技术博客的第一个原因是为了与他人分享我的发现，并节省他们通过我已经解决的问题的过程。此外，我总是很享受解释某事强迫我更好地理解这个主题的事实，而写作则需要更多的研究来在我脑海中清晰地理解事物，然后再尝试向其他人介绍这个主题。**

**我所知的大部分知识都来自个人调查，但没有那些免费分享知识的人的工作，我就无法取得太多进步。自由软件运动并非始于互联网，我在 80 年代和 90 年代就尝到了它的味道，但不可否认，万维网极大地提高了知识共享的速度和质量。**

**因此，这本书是一种方式，向所有花时间写博客文章、免费书籍、软件以及组织会议、小组、聚会的人表示感谢。这就是为什么我在会议上教人们，这就是我写技术博客的原因，这也是这本书背后的原因。**

**话虽如此，如果你想用金钱来认可我的努力，请随意。任何出版书籍或参加会议的人都会产生费用，任何帮助都受欢迎。然而，你能做的最好的事情就是成为这个共享知识过程的一部分；实验、学习和分享你所学的知识。如果你想从经济上做出贡献，你可以在[Leanpub](https://leanpub.com/clean-architectures-in-python)上购买这本书。**

## **提交问题或补丁**

**这本书不是协作成果。它是我的作品，表达了我对某些主题的个人观点，也遵循了我的教学方法。然而，两者都可以改进，也可能有错误，所以我欢迎建议，并乐意接收关于错误或任何请求澄清的报告。请自由使用[书仓库](https://github.com/pycabook/pycabook/issues)的 GitHub 问题或书中介绍的项目。我会尽快回答或修复问题，如果需要，我会发布带有更正的新版本的书。谢谢！**

## **关于作者**

**我的名字是莱昂纳多·约尔达尼，我于 1977 年出生，这一年给世界带来了《星球大战》、《bash》、《Apple II》、《BSD》、《Dire Straits》、《精灵宝钻》等许多事物。我对操作系统和计算机语言、摄影、奇幻和科幻、视频和桌面游戏、弹吉他以及（太多）其他事物感兴趣。**

**我研究并使用过几种编程语言，其中我最喜欢的有 Motorola 68k 汇编语言、C 和 Python。我喜欢数学和密码学。我主要对开源软件感兴趣，我喜欢计算机科学的理论和实践方面。**

**我已经做了 13 年的 C/Python 程序员和卫星图像公司的 devops，目前我是位于伦敦和纽约的英国公司[WeGotPOP](https://www.wegotpop.com)的主要开发者之一，该公司为电影制作创造创新软件。**

**2013 年，我开始在我的博客[The Digital Cat](https://www.thedigitalcatonline.com)上发布一些技术思考，2018 年我出版了你现在正在阅读的这本书的第一版。**

## **第二版的变化**

**新版本，新错误！我相当确信这是我在这次版本中引入的主要变化。**

**开个玩笑，第二版有很多变化，但核心示例保持不变，从那个角度看，代码只是略有变化（我使用了 dataclasses 并引入了一个管理脚本来编排测试），并没有发生革命性的变化。**

**所以，如果你已经阅读了第一版，你可能想看看第 6、7、8 章，我在那里重新思考了管理集成测试和项目生产就绪设置的方式。如果你还没有阅读第一版，我希望你会欣赏我在第一章中用叙述的例子引入干净架构的努力，在那之后我开始更详细地讨论架构并展示一些代码。**

**第一版读者可能会注意到内容上的最大变化是，我移除了 TDD 的部分，只关注了干净的架构。我在 TDD 上写的内容已经变成了我博客上的 5 篇帖子，我在书中引用了它们，但这次我更愿意忠于标题，只讨论主题。这可能意味着这本书不再适合完全的初学者了，但既然资源已经存在，我并不觉得有太多的罪恶感。**

**我还尝试了不同的工具链。第一版是直接使用[Leanpub 的 Markua](https://leanpub.com/markua/read)语言创建的，这给了我开始所需的一切。然而，在编写第二版时，由于缺少诸如警告和源代码片段的文件名以及配置选项的普遍缺乏，我逐渐感到不满意。我认为 Leanpub 做得很好，但 Markua 并没有提供我需要的所有功能。所以我尝试了[Pandoc](https://pandoc.org/)，我立刻遇到了 LaTeX 的障碍，至少可以说它是一种神秘的黑色魔法。我花了很多时间修改模板和 Python 过滤器，以获得我想要的大概效果，但我不满意。**

**最终我发现了[AsciiDoc](https://asciidoc.org/)，这看起来像是完美的解决方案。我实际上就是用这个工具链发布了第二版的第一个版本，与 Markdown 相比，我被 AsciiDoc 深深吸引。不幸的是，我在尝试自定义标准模板时遇到了很多问题，而且不知道 Ruby 让我的体验变得更糟。过了一段时间，我得到了一个相当不错的版本（我已经发布了），但我一直想着我还想要更多。**

**所以我决定尝试编写自己的解析器，就这样开始了。这本书的版本是使用 Mau 编写的，它可以在[`github.com/Project-Mau`](https://github.com/Project-Mau)找到，以及 Pelican ([`getpelican.com`](https://getpelican.com))，我已经成功地用它来写我的博客。我正在编写一个 Mau 访问者，它将源代码转换为 Markua，这样我就可以使用 Leanpub 的工具来生成 PDF。**

**我希望你会喜欢我在这新版本中投入的努力！**

**1**

[`www.amazon.com/Object-Oriented-Software-Engineering-Approach/dp/0201544350`](https://www.amazon.com/Object-Oriented-Software-Engineering-Approach/dp/0201544350)**
